
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAMO Gew√§ssermonitoring - L√∂cknitzer See</title>
    <link rel="stylesheet" href="dashboard_styles.css">



    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>WAMO Gew√§ssermonitoring</h1>
            <div class="subtitle">Station: L√∂cknitzer See (wamo00019)</div>
            <div class="timestamp">Bericht erstellt: 01.07.2025 23:46 Uhr</div>
            <div class="timestamp">Datenstand: 07.06.2025 bis 07.06.2025</div>
        </div>
        
        <!-- Status Alert -->
        <div class="status-alert status-warnung">
            <h2>‚ö†Ô∏è Gesamtstatus: WARNUNG</h2>
        </div>
        
        <!-- Tab Navigation -->
        <div class="tab-nav">
            <button class="tab-button active" onclick="showTab(event, 'overview')">√úbersicht</button>
            <button class="tab-button" onclick="showTab(event, 'errors')">Fehlerhafte Werte</button>
            <button class="tab-button" onclick="showTab(event, 'daily')">Tageswerte</button>
            <button class="tab-button" onclick="showTab(event, 'analysis')">Erweiterte Analyse</button>
            <button class="tab-button" onclick="showTab(event, 'text')">Text-Bericht</button>
            <button class="tab-button" onclick="showTab(event, 'settings')">Einstellungen</button>
        </div>
        
        <!-- Tab 1: √úbersicht (Original Dashboard) -->
        <div id="overview" class="tab-content active">
            <!-- Hauptprobleme -->
            <div class="problems-section"><h2>‚ö†Ô∏è Identifizierte Probleme</h2><div class="problem-item">Hoher landwirtschaftlicher Einfluss</div></div>
            
            <!-- Sofortma√ünahmen -->
            <div class="actions-section"><h2>üö® Erforderliche Sofortma√ünahmen</h2><div class="action-item"><span class="action-icon">‚ñ∂</span>Kontakt mit Landwirtschaftsbeh√∂rde aufnehmen</div></div>
            
            <!-- Meldepflichten -->
            
            
            <!-- Risiko-Indikatoren -->
            <h2 style="color: #0066CC; margin-bottom: 20px;">Risiko-Indikatoren</h2>
            <div class="risk-indicators">
                
            <div class="risk-card">
                <div class="risk-label">Landwirtschaftlicher Einfluss <span class="info-icon" onclick="showInfo('risk-agricultural')">i</span></div>
                <div class="risk-value risk-high">98</div>
                <div style="font-size: 0.9em; color: #666;">von 100</div>
            </div>
            
            <div class="risk-card">
                <div class="risk-label">Sensorplausibilit√§t <span class="info-icon" onclick="showInfo('risk-plausibility')">i</span></div>
                <div class="risk-value risk-low">97%</div>
                <div style="font-size: 0.9em; color: #666;">Korrelationsqualit√§t</div>
            </div>
            
                <div class="risk-card">
                    <div class="risk-label">N√§hrstoffbelastung <span class="info-icon" onclick="showInfo('risk-nutrients')">i</span></div>
                    <div class="risk-value risk-high">93</div>
                    <div style="font-size: 0.9em; color: #666;">Index</div>
                </div>
                
            </div>

            <!-- Karte -->
            <div class="map-section">
                <h2>üìç Lage der Messstation</h2>
                <div id="map"></div>
                <div class="map-info">
                    <strong>L√∂cknitzer See</strong><br>
                    Koordinaten: 53.445698¬∞N, 14.226044¬∞E<br>
                    Gemeinde: L√∂cknitz
                </div>
            </div>
            
            <!-- Aktuelle Messwerte -->
            <div class="parameters-section">
                <h2 id="currentDayTitle">Aktuelle Tageswerte</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Mittelwert</th>
                            <th>Min</th>
                            <th>Max</th>
                            <th>Qualit√§t</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Daten vom 07.06.2025 -->
            <tr>
                <td>Phycocyanin Abs.</td>
                <td>12.50</td>
                <td>11.50</td>
                <td>13.50</td>
                <td>100.0%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>Phycocyanin Abs. (comp)</td>
                <td>0.10</td>
                <td>0.00</td>
                <td>0.10</td>
                <td>100.0%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>TOC</td>
                <td>26.70</td>
                <td>26.20</td>
                <td>27.30</td>
                <td>100.0%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>Tr√ºbung</td>
                <td>46.90</td>
                <td>43.50</td>
                <td>50.80</td>
                <td>95.8%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>Chl-a</td>
                <td>44.90</td>
                <td>41.10</td>
                <td>50.60</td>
                <td>100.0%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>DOC</td>
                <td>11.80</td>
                <td>11.50</td>
                <td>12.00</td>
                <td>100.0%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>Nitrat</td>
                <td>6.10</td>
                <td>3.30</td>
                <td>8.40</td>
                <td>100.0%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>Gel√∂ster Sauerstoff</td>
                <td>8.10</td>
                <td>6.36</td>
                <td>9.78</td>
                <td>95.8%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>Leitf√§higkeit</td>
                <td>670.00</td>
                <td>665.00</td>
                <td>676.00</td>
                <td>91.7%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>pH</td>
                <td>8.64</td>
                <td>8.35</td>
                <td>8.85</td>
                <td>95.8%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>Redoxpotential</td>
                <td>216.00</td>
                <td>120.00</td>
                <td>254.00</td>
                <td>100.0%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>Wassertemp. (0.5m)</td>
                <td>19.72</td>
                <td>19.11</td>
                <td>20.15</td>
                <td>100.0%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>Wassertemp. (1m)</td>
                <td>19.54</td>
                <td>18.95</td>
                <td>19.98</td>
                <td>100.0%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>Lufttemperatur</td>
                <td>15.90</td>
                <td>11.40</td>
                <td>20.90</td>
                <td>100.0%</td>
                <td class="value-good">Gut</td>
            </tr>
            
            <tr>
                <td>Wassertemp. (2m)</td>
                <td>11.78</td>
                <td>10.95</td>
                <td>11.97</td>
                <td>100.0%</td>
                <td class="value-good">Gut</td>
            </tr>
            
                    </tbody>
                </table>
            </div>
            
            <!-- Landwirtschaftliche Details -->
            
        </div>
        
        <!-- Tab 2: Fehlerhafte Werte -->
        <div id="errors" class="tab-content">
            <h2>Fehlerhafte und Verd√§chtige Werte</h2>
            
            <div class="filter-controls">
                <select id="errorParamFilter">
                    <option value="">Alle Parameter</option>
                </select>
                <select id="errorFlagFilter">
                    <option value="">Alle Flags</option>
                    <option value="3">Verd√§chtig</option>
                    <option value="4">Schlecht</option>
                    <option value="9">Fehlend</option>
                </select>
                <input type="date" id="errorDateFilter" placeholder="Datum">
                <button onclick="filterErrorTable()">Filtern</button>
                <button onclick="resetErrorFilter()">Zur√ºcksetzen</button>
            </div>
            
            <div class="error-table">
                <table id="errorTable">
                    <thead>
                        <tr>
                            <th>Nr.</th>
                            <th>Zeitpunkt</th>
                            <th>Parameter</th>
                            <th>Wert</th>
                            <th>Flag</th>
                            <th>Grund</th>
                        </tr>
                    </thead>
                    <tbody id="errorTableBody">
                        <!-- Wird durch JavaScript gef√ºllt -->
                    </tbody>
                </table>
            </div>
            <p style="margin-top: 20px; color: #666;">
                <span id="errorCount">0</span> fehlerhafte Werte gefunden
            </p>
        </div>
        
        <!-- Tab 3: Tageswerte -->
        <div id="daily" class="tab-content">
            <h2>Konsolidierte Tageswerte</h2>
            
            <div class="filter-controls">
                <select id="dailyParamFilter">
                    <option value="">Alle Parameter</option>
                </select>
                <input type="date" id="dailyStartDate" placeholder="Von">
                <input type="date" id="dailyEndDate" placeholder="Bis">
                <button onclick="filterDailyTable()">Filtern</button>
                <button onclick="resetDailyFilter()">Zur√ºcksetzen</button>
            </div>
            
            <div style="max-height: 600px; overflow-y: auto;">
                <table id="dailyTable">
                    <thead>
                        <tr>
                            <th>Datum</th>
                            <th>Parameter</th>
                            <th>Mittelwert</th>
                            <th>Min</th>
                            <th>Max</th>
                            <th>Std.Abw.</th>
                            <th>Qualit√§t %</th>
                            <th>Flag</th>
                        </tr>
                    </thead>
                    <tbody id="dailyTableBody">
                        <!-- Wird durch JavaScript gef√ºllt -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Tab 4: Erweiterte Analyse -->
        <div id="analysis" class="tab-content">
            <h2>Erweiterte Analyse</h2>
            
            <div id="analysisContent">
                <!-- Wird durch JavaScript gef√ºllt -->
            </div>
        </div>
        
        <!-- Tab 5: Text-Bericht -->
        <div id="text" class="tab-content">
            <h2>Text-Bericht</h2>
            
            <div class="text-display" id="textReport">
                <!-- Wird durch JavaScript gef√ºllt -->
            </div>
        </div>
        <!-- Tab 6: Einstellungen -->
        <div id="settings" class="tab-content">
            <h2>Stations-Einstellungen</h2>
            <div id="settingsContent">
                <!-- Wird durch JavaScript gef√ºllt -->
            </div>
        </div>
        
        <!-- Kontakte -->
        <div class="contact-section">
            <h2>üìû Wichtige Kontakte</h2>
            <div class="contact-item">
                <strong>Untere Wasserbeh√∂rde LK VG:</strong> 03834-8760-0 | wasserbehoerde@kreis-vg.de
            </div>
            <div class="contact-item">
                <strong>Gesundheitsamt LK VG:</strong> 03834-8760-2301 | gesundheitsamt@kreis-vg.de
            </div>
            <div class="contact-item">
                <strong>StALU Mecklenburgische Seenplatte:</strong> 0395-380-0 | poststelle@stalums.mv-regierung.de
            </div>
            <div class="contact-item">
                <strong>24h-Bereitschaft Umweltamt:</strong> 0171-1234567 (nur bei akuten Gef√§hrdungen)
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p>Landkreis Vorpommern-Greifswald - Stabsstelle Digitalisierung und IT</p>
            <p>WAMO Gew√§ssermonitoring v1.0.0 | Daten unter CC BY-NC 4.0</p>
        </div>

        <!-- Info Modal -->
        <div id="infoModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">Information</h2>
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Inhalt wird dynamisch eingef√ºgt -->
                </div>
            </div>
    </div>
    
    <!-- JavaScript -->
<!-- JavaScript -->
    <script>
        // Daten f√ºr JavaScript
        const errorData = {"zeitraum": "2025-06-07 00:00:00 bis 2025-06-07 23:00:00", "anzahl_fehler": 5, "fehlerhafte_werte": [{"zeitpunkt": "2025-06-07 07:00:00", "parameter": "Gel√∂ster Sauerstoff", "wert": 6.21, "flag": 3, "flag_name": "VERD√ÑCHTIG", "grund": "Multivariate Anomalie: Gel√∂ster Sauerstoff ungew√∂hnlich niedrig"}, {"zeitpunkt": "2025-06-07 07:00:00", "parameter": "Leitf√§higkeit", "wert": 676.0, "flag": 3, "flag_name": "VERD√ÑCHTIG", "grund": "Multivariate Anomalie: Leitf√§higkeit ungew√∂hnlich hoch"}, {"zeitpunkt": "2025-06-07 07:00:00", "parameter": "Tr√ºbung", "wert": 43.322, "flag": 3, "flag_name": "VERD√ÑCHTIG", "grund": "Multivariate Anomalie: Tr√ºbung ungew√∂hnlich niedrig"}, {"zeitpunkt": "2025-06-07 07:00:00", "parameter": "pH", "wert": 8.332, "flag": 3, "flag_name": "VERD√ÑCHTIG", "grund": "Multivariate Anomalie: pH ungew√∂hnlich niedrig"}, {"zeitpunkt": "2025-06-07 14:00:00", "parameter": "Leitf√§higkeit", "wert": 670.0, "flag": 3, "flag_name": "VERD√ÑCHTIG", "grund": "Wert seit 3 Stunden unver√§ndert"}]};
        const dailyData = {"2025-06-07T00:00:00": {"Phycocyanin Abs._Min": 11.5, "Phycocyanin Abs._Max": 13.5, "Phycocyanin Abs._Mittelwert": 12.5, "Phycocyanin Abs._StdAbw": 0.6, "Phycocyanin Abs._Anteil_Guter_Werte_Prozent": 100.0, "Phycocyanin Abs._Aggregat_QARTOD_Flag": 1, "Phycocyanin Abs._Aggregat_Gruende": "Alle Werte plausibel", "Phycocyanin Abs. (comp)_Min": 0.0, "Phycocyanin Abs. (comp)_Max": 0.1, "Phycocyanin Abs. (comp)_Mittelwert": 0.1, "Phycocyanin Abs. (comp)_StdAbw": 0.0, "Phycocyanin Abs. (comp)_Anteil_Guter_Werte_Prozent": 100.0, "Phycocyanin Abs. (comp)_Aggregat_QARTOD_Flag": 1, "Phycocyanin Abs. (comp)_Aggregat_Gruende": "Alle Werte plausibel", "TOC_Min": 26.2, "TOC_Max": 27.3, "TOC_Mittelwert": 26.7, "TOC_Anteil_Guter_Werte_Prozent": 100.0, "TOC_Aggregat_QARTOD_Flag": 1, "TOC_Aggregat_Gruende": "Alle Werte plausibel", "Tr√ºbung_Min": 43.5, "Tr√ºbung_Max": 50.8, "Tr√ºbung_Mittelwert": 46.9, "Tr√ºbung_StdAbw": 2.2, "Tr√ºbung_Anteil_Guter_Werte_Prozent": 95.8, "Tr√ºbung_Aggregat_QARTOD_Flag": 1, "Tr√ºbung_Aggregat_Gruende": "Multivariate Anomalie: Tr√ºbung ungew√∂hnlich niedrig", "Chl-a_Min": 41.1, "Chl-a_Max": 50.6, "Chl-a_Mittelwert": 44.9, "Chl-a_StdAbw": 2.5, "Chl-a_Anteil_Guter_Werte_Prozent": 100.0, "Chl-a_Aggregat_QARTOD_Flag": 1, "Chl-a_Aggregat_Gruende": "Alle Werte plausibel", "DOC_Min": 11.5, "DOC_Max": 12.0, "DOC_Mittelwert": 11.8, "DOC_Anteil_Guter_Werte_Prozent": 100.0, "DOC_Aggregat_QARTOD_Flag": 1, "DOC_Aggregat_Gruende": "Alle Werte plausibel", "Nitrat_Min": 3.3, "Nitrat_Max": 8.4, "Nitrat_Mittelwert": 6.1, "Nitrat_Anteil_Guter_Werte_Prozent": 100.0, "Nitrat_Aggregat_QARTOD_Flag": 1, "Nitrat_Aggregat_Gruende": "Alle Werte plausibel", "Gel√∂ster Sauerstoff_Min": 6.36, "Gel√∂ster Sauerstoff_Max": 9.78, "Gel√∂ster Sauerstoff_Mittelwert": 8.1, "Gel√∂ster Sauerstoff_Median": 8.24, "Gel√∂ster Sauerstoff_StdAbw": 1.15, "Gel√∂ster Sauerstoff_Anteil_Guter_Werte_Prozent": 95.8, "Gel√∂ster Sauerstoff_Aggregat_QARTOD_Flag": 1, "Gel√∂ster Sauerstoff_Aggregat_Gruende": "Multivariate Anomalie: Gel√∂ster Sauerstoff ungew√∂hnlich niedrig", "Leitf√§higkeit_Min": 665.0, "Leitf√§higkeit_Max": 676.0, "Leitf√§higkeit_Mittelwert": 670.0, "Leitf√§higkeit_Anteil_Guter_Werte_Prozent": 91.7, "Leitf√§higkeit_Aggregat_QARTOD_Flag": 1, "Leitf√§higkeit_Aggregat_Gruende": "Multivariate Anomalie: Leitf√§higkeit ungew√∂hnlich hoch; Wert seit 3 Stunden unver√§ndert", "pH_Min": 8.35, "pH_Max": 8.85, "pH_Mittelwert": 8.64, "pH_Median": 8.66, "pH_StdAbw": 0.17, "pH_Anteil_Guter_Werte_Prozent": 95.8, "pH_Aggregat_QARTOD_Flag": 1, "pH_Aggregat_Gruende": "Multivariate Anomalie: pH ungew√∂hnlich niedrig", "Redoxpotential_Min": 120.0, "Redoxpotential_Max": 254.0, "Redoxpotential_Mittelwert": 216.0, "Redoxpotential_StdAbw": 34.0, "Redoxpotential_Anteil_Guter_Werte_Prozent": 100.0, "Redoxpotential_Aggregat_QARTOD_Flag": 1, "Redoxpotential_Aggregat_Gruende": "Alle Werte plausibel", "Wassertemp. (0.5m)_Min": 19.11, "Wassertemp. (0.5m)_Max": 20.15, "Wassertemp. (0.5m)_Mittelwert": 19.72, "Wassertemp. (0.5m)_Anteil_Guter_Werte_Prozent": 100.0, "Wassertemp. (0.5m)_Aggregat_QARTOD_Flag": 1, "Wassertemp. (0.5m)_Aggregat_Gruende": "Alle Werte plausibel", "Wassertemp. (1m)_Min": 18.95, "Wassertemp. (1m)_Max": 19.98, "Wassertemp. (1m)_Mittelwert": 19.54, "Wassertemp. (1m)_Anteil_Guter_Werte_Prozent": 100.0, "Wassertemp. (1m)_Aggregat_QARTOD_Flag": 1, "Wassertemp. (1m)_Aggregat_Gruende": "Alle Werte plausibel", "Lufttemperatur_Min": 11.4, "Lufttemperatur_Max": 20.9, "Lufttemperatur_Mittelwert": 15.9, "Lufttemperatur_Anteil_Guter_Werte_Prozent": 100.0, "Lufttemperatur_Aggregat_QARTOD_Flag": 1, "Lufttemperatur_Aggregat_Gruende": "Alle Werte plausibel", "Wassertemp. (2m)_Min": 10.95, "Wassertemp. (2m)_Max": 11.97, "Wassertemp. (2m)_Mittelwert": 11.78, "Wassertemp. (2m)_Anteil_Guter_Werte_Prozent": 100.0, "Wassertemp. (2m)_Aggregat_QARTOD_Flag": 1, "Wassertemp. (2m)_Aggregat_Gruende": "Alle Werte plausibel", "Supply Current_Min": 259.0, "Supply Current_Max": 277.0, "Supply Current_Mittelwert": 266.75, "Supply Current_Anteil_Guter_Werte_Prozent": 100.0, "Supply Current_Aggregat_QARTOD_Flag": 1, "Supply Current_Aggregat_Gruende": "Alle Werte plausibel"}};
        const analysisData = {"station_id": "wamo00019", "zeitraum": {"von": "2025-06-07T00:00:00", "bis": "2025-06-07T23:00:00"}, "basis_validierung": {"2025-06-07T00:00:00": {"Phycocyanin Abs._Min": 11.5, "Phycocyanin Abs._Max": 13.5, "Phycocyanin Abs._Mittelwert": 12.5, "Phycocyanin Abs._StdAbw": 0.6, "Phycocyanin Abs._Anteil_Guter_Werte_Prozent": 100.0, "Phycocyanin Abs._Aggregat_QARTOD_Flag": 1, "Phycocyanin Abs._Aggregat_Gruende": "Alle Werte plausibel", "Phycocyanin Abs. (comp)_Min": 0.0, "Phycocyanin Abs. (comp)_Max": 0.1, "Phycocyanin Abs. (comp)_Mittelwert": 0.1, "Phycocyanin Abs. (comp)_StdAbw": 0.0, "Phycocyanin Abs. (comp)_Anteil_Guter_Werte_Prozent": 100.0, "Phycocyanin Abs. (comp)_Aggregat_QARTOD_Flag": 1, "Phycocyanin Abs. (comp)_Aggregat_Gruende": "Alle Werte plausibel", "TOC_Min": 26.2, "TOC_Max": 27.3, "TOC_Mittelwert": 26.7, "TOC_Anteil_Guter_Werte_Prozent": 100.0, "TOC_Aggregat_QARTOD_Flag": 1, "TOC_Aggregat_Gruende": "Alle Werte plausibel", "Tr√ºbung_Min": 43.5, "Tr√ºbung_Max": 50.8, "Tr√ºbung_Mittelwert": 46.9, "Tr√ºbung_StdAbw": 2.2, "Tr√ºbung_Anteil_Guter_Werte_Prozent": 95.8, "Tr√ºbung_Aggregat_QARTOD_Flag": 1, "Tr√ºbung_Aggregat_Gruende": "Multivariate Anomalie: Tr√ºbung ungew√∂hnlich niedrig", "Chl-a_Min": 41.1, "Chl-a_Max": 50.6, "Chl-a_Mittelwert": 44.9, "Chl-a_StdAbw": 2.5, "Chl-a_Anteil_Guter_Werte_Prozent": 100.0, "Chl-a_Aggregat_QARTOD_Flag": 1, "Chl-a_Aggregat_Gruende": "Alle Werte plausibel", "DOC_Min": 11.5, "DOC_Max": 12.0, "DOC_Mittelwert": 11.8, "DOC_Anteil_Guter_Werte_Prozent": 100.0, "DOC_Aggregat_QARTOD_Flag": 1, "DOC_Aggregat_Gruende": "Alle Werte plausibel", "Nitrat_Min": 3.3, "Nitrat_Max": 8.4, "Nitrat_Mittelwert": 6.1, "Nitrat_Anteil_Guter_Werte_Prozent": 100.0, "Nitrat_Aggregat_QARTOD_Flag": 1, "Nitrat_Aggregat_Gruende": "Alle Werte plausibel", "Gel√∂ster Sauerstoff_Min": 6.36, "Gel√∂ster Sauerstoff_Max": 9.78, "Gel√∂ster Sauerstoff_Mittelwert": 8.1, "Gel√∂ster Sauerstoff_Median": 8.24, "Gel√∂ster Sauerstoff_StdAbw": 1.15, "Gel√∂ster Sauerstoff_Anteil_Guter_Werte_Prozent": 95.8, "Gel√∂ster Sauerstoff_Aggregat_QARTOD_Flag": 1, "Gel√∂ster Sauerstoff_Aggregat_Gruende": "Multivariate Anomalie: Gel√∂ster Sauerstoff ungew√∂hnlich niedrig", "Leitf√§higkeit_Min": 665.0, "Leitf√§higkeit_Max": 676.0, "Leitf√§higkeit_Mittelwert": 670.0, "Leitf√§higkeit_Anteil_Guter_Werte_Prozent": 91.7, "Leitf√§higkeit_Aggregat_QARTOD_Flag": 1, "Leitf√§higkeit_Aggregat_Gruende": "Multivariate Anomalie: Leitf√§higkeit ungew√∂hnlich hoch; Wert seit 3 Stunden unver√§ndert", "pH_Min": 8.35, "pH_Max": 8.85, "pH_Mittelwert": 8.64, "pH_Median": 8.66, "pH_StdAbw": 0.17, "pH_Anteil_Guter_Werte_Prozent": 95.8, "pH_Aggregat_QARTOD_Flag": 1, "pH_Aggregat_Gruende": "Multivariate Anomalie: pH ungew√∂hnlich niedrig", "Redoxpotential_Min": 120.0, "Redoxpotential_Max": 254.0, "Redoxpotential_Mittelwert": 216.0, "Redoxpotential_StdAbw": 34.0, "Redoxpotential_Anteil_Guter_Werte_Prozent": 100.0, "Redoxpotential_Aggregat_QARTOD_Flag": 1, "Redoxpotential_Aggregat_Gruende": "Alle Werte plausibel", "Wassertemp. (0.5m)_Min": 19.11, "Wassertemp. (0.5m)_Max": 20.15, "Wassertemp. (0.5m)_Mittelwert": 19.72, "Wassertemp. (0.5m)_Anteil_Guter_Werte_Prozent": 100.0, "Wassertemp. (0.5m)_Aggregat_QARTOD_Flag": 1, "Wassertemp. (0.5m)_Aggregat_Gruende": "Alle Werte plausibel", "Wassertemp. (1m)_Min": 18.95, "Wassertemp. (1m)_Max": 19.98, "Wassertemp. (1m)_Mittelwert": 19.54, "Wassertemp. (1m)_Anteil_Guter_Werte_Prozent": 100.0, "Wassertemp. (1m)_Aggregat_QARTOD_Flag": 1, "Wassertemp. (1m)_Aggregat_Gruende": "Alle Werte plausibel", "Lufttemperatur_Min": 11.4, "Lufttemperatur_Max": 20.9, "Lufttemperatur_Mittelwert": 15.9, "Lufttemperatur_Anteil_Guter_Werte_Prozent": 100.0, "Lufttemperatur_Aggregat_QARTOD_Flag": 1, "Lufttemperatur_Aggregat_Gruende": "Alle Werte plausibel", "Wassertemp. (2m)_Min": 10.95, "Wassertemp. (2m)_Max": 11.97, "Wassertemp. (2m)_Mittelwert": 11.78, "Wassertemp. (2m)_Anteil_Guter_Werte_Prozent": 100.0, "Wassertemp. (2m)_Aggregat_QARTOD_Flag": 1, "Wassertemp. (2m)_Aggregat_Gruende": "Alle Werte plausibel", "Supply Current_Min": 259.0, "Supply Current_Max": 277.0, "Supply Current_Mittelwert": 266.75, "Supply Current_Anteil_Guter_Werte_Prozent": 100.0, "Supply Current_Aggregat_QARTOD_Flag": 1, "Supply Current_Aggregat_Gruende": "Alle Werte plausibel"}}, "erweiterte_analysen": {"korrelations_qualitaet": {"metriken": {"pH-Gel√∂ster Sauerstoff_correlation_quality": 91.37198702986586, "pH-Gel√∂ster Sauerstoff_actual_correlation": 0.9862801297013414, "Chl-a-pH_correlation_quality": 100, "Chl-a-pH_actual_correlation": 0.4294480223152456, "Tr√ºbung-Chl-a_correlation_quality": 100, "Tr√ºbung-Chl-a_actual_correlation": 0.45599625830513163, "overall_correlation_quality": 97.12399567662196}, "gesamtqualitaet": 97.12399567662196, "auffaellige_korrelationen": []}, "landwirtschaftliche_eintraege": {"risiko_index": 97.61, "erkannte_ereignisse": [], "risiko_indikatoren": {"nutrient_load_index": 92.83, "runoff_frequency_index": 100, "water_stress_index": 100, "overall_agricultural_risk": 97.61}, "langzeit_trends": {}}, "regionale_bewertung": {"saison_faktoren": {"d√ºnger_risiko": 0.8, "g√ºlle_risiko": 0.2, "erosions_risiko": 0.3, "aktivit√§t": "d√ºngung"}, "parameter_bewertungen": {"Nitrat": {"wert": 3.48, "status": "gut", "interpretation": "Typischer Hintergrundwert f√ºr MV-Seen"}, "DOC": {"wert": 11.769, "status": "aufmerksam", "interpretation": "Erh√∂hter DOC - m√∂gliche organische Eintr√§ge"}, "Leitf√§higkeit": {"wert": 667.0, "status": "warnung", "interpretation": "Hohe Leitf√§higkeit - D√ºngersalze wahrscheinlich"}}, "empfehlungen": ["Erh√∂hte Aufmerksamkeit: Aktuell d√ºngung-Phase. Verst√§rkte Probenahme nach Niederschl√§gen empfohlen.", "Regionale Ansprechpartner: Untere Wasserbeh√∂rde LK VG (03834-8760-0), Untere Wasserbeh√∂rde LK MSE (0395-57087-0), StALU MS Neubrandenburg (0395-380-0)", "SOFORTMASSNAHMEN ERFORDERLICH:", "1. Gew√§sserschau mit Landwirtschaftsbeh√∂rde vereinbaren", "2. Anlieger-Gespr√§ch √ºber F√∂rderung von Gew√§sserrandstreifen (5m)", "3. Pr√ºfung AUKM-F√∂rderung (Agrarumwelt- und Klimama√ünahmen MV)", "4. Erosionsschutzberatung durch LMS Agrarberatung anbieten"]}}, "zusammenfassung": {"status": "warnung", "hauptprobleme": ["Hoher landwirtschaftlicher Einfluss"], "sofortmassnahmen": ["Kontakt mit Landwirtschaftsbeh√∂rde aufnehmen"], "meldepflichten": []}};
        const textReport = "====================================================================================================\nDETAILLIERTER VALIDIERUNGSBERICHT\n====================================================================================================\n\nZUSAMMENFASSUNG:\n----------------------------------------\nzeitraum: 2025-06-07 00:00:00 bis 2025-06-07 23:00:00\nanzahl_parameter: 16\nanzahl_zeitpunkte: 24\ngesamt_messungen: 384\ngesamt_gut: 379\ngesamt_gut_prozent: 98.7\nanzahl_fehler: 5\nbetroffene_parameter: ['Leitf√§higkeit', 'pH', 'Gel√∂ster Sauerstoff', 'Tr√ºbung']\n\n\nPARAMETER-STATISTIKEN:\n----------------------------------------\n\nPhycocyanin Abs.:\n  Gut: 24 von 24 (100.0%)\n  Flag-Verteilung: {'GUT': 24}\n\nPhycocyanin Abs. (comp):\n  Gut: 24 von 24 (100.0%)\n  Flag-Verteilung: {'GUT': 24}\n\nTOC:\n  Gut: 24 von 24 (100.0%)\n  Flag-Verteilung: {'GUT': 24}\n\nTr√ºbung:\n  Gut: 23 von 24 (95.8%)\n  Flag-Verteilung: {'GUT': 23, 'VERD√ÑCHTIG': 1}\n\nChl-a:\n  Gut: 24 von 24 (100.0%)\n  Flag-Verteilung: {'GUT': 24}\n\nDOC:\n  Gut: 24 von 24 (100.0%)\n  Flag-Verteilung: {'GUT': 24}\n\nNitrat:\n  Gut: 24 von 24 (100.0%)\n  Flag-Verteilung: {'GUT': 24}\n\nGel√∂ster Sauerstoff:\n  Gut: 23 von 24 (95.8%)\n  Flag-Verteilung: {'GUT': 23, 'VERD√ÑCHTIG': 1}\n\nLeitf√§higkeit:\n  Gut: 22 von 24 (91.7%)\n  Flag-Verteilung: {'GUT': 22, 'VERD√ÑCHTIG': 2}\n\npH:\n  Gut: 23 von 24 (95.8%)\n  Flag-Verteilung: {'GUT': 23, 'VERD√ÑCHTIG': 1}\n\nRedoxpotential:\n  Gut: 24 von 24 (100.0%)\n  Flag-Verteilung: {'GUT': 24}\n\nWassertemp. (0.5m):\n  Gut: 24 von 24 (100.0%)\n  Flag-Verteilung: {'GUT': 24}\n\nWassertemp. (1m):\n  Gut: 24 von 24 (100.0%)\n  Flag-Verteilung: {'GUT': 24}\n\nLufttemperatur:\n  Gut: 24 von 24 (100.0%)\n  Flag-Verteilung: {'GUT': 24}\n\nWassertemp. (2m):\n  Gut: 24 von 24 (100.0%)\n  Flag-Verteilung: {'GUT': 24}\n\nSupply Current:\n  Gut: 24 von 24 (100.0%)\n  Flag-Verteilung: {'GUT': 24}\n\n\nALLE FEHLERHAFTEN WERTE:\n----------------------------------------------------------------------------------------------------\nNr.    Zeitpunkt            Parameter                 Wert         Flag            Grund                                   \n----------------------------------------------------------------------------------------------------\n1      2025-06-07 07:00:00  Gel√∂ster Sauerstoff       6.21         VERD√ÑCHTIG      Multivariate Anomalie: Gel√∂ster Sauersto...\n2      2025-06-07 07:00:00  Leitf√§higkeit             676.00       VERD√ÑCHTIG      Multivariate Anomalie: Leitf√§higkeit ung...\n3      2025-06-07 07:00:00  Tr√ºbung                   43.32        VERD√ÑCHTIG      Multivariate Anomalie: Tr√ºbung ungew√∂hnl...\n4      2025-06-07 07:00:00  pH                        8.33         VERD√ÑCHTIG      Multivariate Anomalie: pH ungew√∂hnlich n...\n5      2025-06-07 14:00:00  Leitf√§higkeit             670.00       VERD√ÑCHTIG      Wert seit 3 Stunden unver√§ndert         \n----------------------------------------------------------------------------------------------------\nGesamt: 5 fehlerhafte Werte\n\n\nERKANNTE MUSTER:\n----------------------------------------\n\nH√§ufigste Fehlergr√ºnde:\n  1x: Multivariate Anomalie: Tr√ºbung ungew√∂hnlich niedrig\n  1x: Multivariate Anomalie: Gel√∂ster Sauerstoff ungew√∂hnlich niedrig\n  1x: Multivariate Anomalie: Leitf√§higkeit ungew√∂hnlich hoch\n  1x: Wert seit 3 Stunden unver√§ndert\n  1x: Multivariate Anomalie: pH ungew√∂hnlich niedrig\n\nParameter mit gemeinsamen Fehlern:\n";
        
        // Debug-Info
        console.log('Error Data:', errorData);
        console.log('Daily Data:', dailyData);
        console.log('Analysis Data:', analysisData);
        console.log('Text Report length:', textReport.length);
        
        // Tab-Funktionalit√§t
        function showTab(event, tabName) {
            // Alle Tabs und Buttons deaktivieren
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-button');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(button => button.classList.remove('active'));
            
            // Aktiven Tab und Button setzen
            document.getElementById(tabName).classList.add('active');
            if (event && event.target) {
                event.target.classList.add('active');
            } else {
                // Fallback: Button nach Text suchen
                buttons.forEach(button => {
                    if (button.onclick && button.onclick.toString().includes(tabName)) {
                        button.classList.add('active');
                    }
                });
            }
            
            // Daten laden wenn n√∂tig
                if (tabName === 'errors') {
                    loadErrorTable();
                } else if (tabName === 'daily') {
                    loadDailyTable();
                } else if (tabName === 'analysis') {
                    loadAnalysis();
                } else if (tabName === 'text') {
                    loadTextReport();
                }
        }
        
        // Fehlerhafte Werte laden
        function loadErrorTable() {
            console.log('Loading error table...');
            const tbody = document.getElementById('errorTableBody');
            const paramFilter = document.getElementById('errorParamFilter');

            tbody.innerHTML = '';
            
            // Pr√ºfe ob Daten vorhanden
            if (!errorData || !errorData.fehlerhafte_werte || errorData.fehlerhafte_werte.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6">Keine fehlerhaften Werte gefunden</td></tr>';
                document.getElementById('errorCount').textContent = '0';
                return;
            }
            
            // Parameter f√ºr Filter sammeln
            const params = [...new Set(errorData.fehlerhafte_werte.map(e => e.parameter))];
            params.forEach(param => {
                const option = document.createElement('option');
                option.value = param;
                option.textContent = param;
                paramFilter.appendChild(option);
            });
            
            // Tabelle f√ºllen
            errorData.fehlerhafte_werte.forEach((error, index) => {
                const row = tbody.insertRow();
                const wertAnzeige = error.wert !== null && error.wert !== undefined 
                    ? (typeof error.wert === 'number' ? error.wert.toFixed(2) : error.wert)
                    : 'N/A';
                
                // Formatiere das Datum deutsch (nur Datum, keine Zeit)
                const dateTime = new Date(error.zeitpunkt);
                const formattedDate = formatDateGerman(error.zeitpunkt);
                const time = dateTime.toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' });
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${formattedDate} ${time}</td>
                    <td>${error.parameter}</td>
                    <td>${wertAnzeige}</td>
                    <td class="value-${error.flag === 3 ? 'warning' : 'bad'}">${error.flag_name}</td>
                    <td>${error.grund}</td>
                `;
            });
            
            document.getElementById('errorCount').textContent = errorData.fehlerhafte_werte.length;
            console.log('Error table loaded with', errorData.fehlerhafte_werte.length, 'entries');
        }
        
        // Filter f√ºr Fehler-Tabelle
        function filterErrorTable() {
            const paramFilter = document.getElementById('errorParamFilter').value;
            const flagFilter = document.getElementById('errorFlagFilter').value;
            const dateFilter = document.getElementById('errorDateFilter').value;
            
            const rows = document.querySelectorAll('#errorTableBody tr');
            let visibleCount = 0;
            
            rows.forEach((row, index) => {
                // Skip header row if exists
                if (row.cells.length < 6) return;
                
                const param = row.cells[2].textContent;
                const zeit = row.cells[1].textContent;
                const errorIndex = parseInt(row.cells[0].textContent) - 1;
                const flag = errorData.fehlerhafte_werte[errorIndex]?.flag?.toString() || '';
                
                let show = true;
                
                if (paramFilter && param !== paramFilter) show = false;
                if (flagFilter && flag !== flagFilter) show = false;
                if (dateFilter && !zeit.startsWith(dateFilter)) show = false;
                
                row.style.display = show ? '' : 'none';
                if (show) visibleCount++;
            });
            
            document.getElementById('errorCount').textContent = visibleCount;
        }
        
        function resetErrorFilter() {
            document.getElementById('errorParamFilter').value = '';
            document.getElementById('errorFlagFilter').value = '';
            document.getElementById('errorDateFilter').value = '';
            filterErrorTable();
        }
        
        // Tageswerte laden
        function loadDailyTable() {
            console.log('Loading daily table...');
            const tbody = document.getElementById('dailyTableBody');
            const paramFilter = document.getElementById('dailyParamFilter');

            tbody.innerHTML = '';
            
            // Pr√ºfe ob Daten vorhanden
            if (!dailyData || Object.keys(dailyData).length === 0) {
                tbody.innerHTML = '<tr><td colspan="8">Keine Tageswerte vorhanden</td></tr>';
                return;
            }
            
            // Parameter sammeln
            const params = new Set();
            
            Object.entries(dailyData).forEach(([date, values]) => {
                Object.keys(values).forEach(key => {
                    const param = key.split('_')[0];
                    if (!key.includes('Flag') && !key.includes('Prozent') && !key.includes('Gruende')) {
                        params.add(param);
                    }
                });
            });
            
            params.forEach(param => {
                const option = document.createElement('option');
                option.value = param;
                option.textContent = param;
                paramFilter.appendChild(option);
            });
            
            // Tabelle f√ºllen
            Object.entries(dailyData).forEach(([date, values]) => {
                // Gruppiere nach Parameter
                const paramGroups = {};
                
                Object.entries(values).forEach(([key, value]) => {
                    const parts = key.split('_');
                    const param = parts[0];
                    const metric = parts.slice(1).join('_');
                    
                    if (!paramGroups[param]) paramGroups[param] = {};
                    paramGroups[param][metric] = value;
                });
                
                // Zeile f√ºr jeden Parameter
                Object.entries(paramGroups).forEach(([param, metrics]) => {
                    if (metrics.Mittelwert !== undefined) {
                        const row = tbody.insertRow();
                        const flag = metrics.Aggregat_QARTOD_Flag || 1;
                        const flagClass = flag === 1 ? 'good' : flag === 3 ? 'warning' : 'bad';
                        
                        row.innerHTML = `
                            <td>${date}</td>
                            <td>${param}</td>
                            <td>${formatValue(metrics.Mittelwert)}</td>
                            <td>${formatValue(metrics.Min)}</td>
                            <td>${formatValue(metrics.Max)}</td>
                            <td>${formatValue(metrics.StdAbw)}</td>
                            <td>${formatValue(metrics.Anteil_Guter_Werte_Prozent, 1)}</td>
                            <td class="value-${flagClass}">${flag}</td>
                        `;
                    }
                });
            });
            
            console.log('Daily table loaded');
        }
        
        // Hilfsfunktion zum Formatieren von Werten
        function formatValue(value, decimals = 2) {
            if (value === undefined || value === null) return '-';
            if (typeof value === 'number') {
                return value.toFixed(decimals);
            }
            return value;
        }
        
        // Filter f√ºr Tageswerte
        function filterDailyTable() {
            const paramFilter = document.getElementById('dailyParamFilter').value;
            const startDate = document.getElementById('dailyStartDate').value;
            const endDate = document.getElementById('dailyEndDate').value;
            
            const rows = document.querySelectorAll('#dailyTableBody tr');
            
            rows.forEach(row => {
                const param = row.cells[1].textContent;
                const dateText = row.cells[0].textContent;
                
                let show = true;
                
                if (paramFilter && param !== paramFilter) show = false;
                
                // Extrahiere nur das Datum (ohne Zeit) f√ºr den Vergleich
                if (startDate || endDate) {
                    // Nimm nur die ersten 10 Zeichen (YYYY-MM-DD) wenn es ein ISO-Datum ist
                    const dateOnly = dateText.substring(0, 10);
                    
                    if (startDate && dateOnly < startDate) show = false;
                    if (endDate && dateOnly > endDate) show = false;
                }
                
                row.style.display = show ? '' : 'none';
            });
        }
        
        function resetDailyFilter() {
            document.getElementById('dailyParamFilter').value = '';
            document.getElementById('dailyStartDate').value = '';
            document.getElementById('dailyEndDate').value = '';
            filterDailyTable();
        }
        

        // Erweiterte Analyse laden
        // Hilfsfunktion f√ºr deutsches Datumsformat
        function formatDateGerman(dateString) {
            if (!dateString) return '-';
            const date = new Date(dateString);
            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const year = date.getFullYear();
            return `${day}.${month}.${year}`;
        }

        function translateEventType(type) {
            const translations = {
                'fertilizer_runoff': 'D√ºngemitteleintrag',
                'erosion_runoff': 'Erosionseintrag',
                'manure_runoff': 'G√ºlle-/Misteintrag',
                'pesticide_runoff': 'Pestizideintrag'
            };
            return translations[type] || type;
        }

        function translateSeverity(severity) {
            const translations = {
                'low': 'gering',
                'medium': 'mittel',
                'high': 'hoch'
            };
            return translations[severity] || severity;
        }

        // Erweiterte Analyse laden
        function loadAnalysis() {
            console.log('Loading analysis...');
            const content = document.getElementById('analysisContent');
            
            if (!analysisData) {
                content.innerHTML = '<p>Keine erweiterten Analysedaten vorhanden</p>';
                return;
            }
            
            let html = '';
            
            // Zeitraum
            if (analysisData.zeitraum) {
                html += `<div class="analysis-section">`;
                html += `<h3>Analysezeitraum</h3>`;
                html += `<p><strong>Von:</strong> ${formatDateGerman(analysisData.zeitraum.von)}<br>`;
                html += `<strong>Bis:</strong> ${formatDateGerman(analysisData.zeitraum.bis)}</p>`;
                html += `</div>`;
            }
            
            // Korrelationsqualit√§t - PROMINENT
            if (analysisData.erweiterte_analysen?.korrelations_qualitaet) {
                const kq = analysisData.erweiterte_analysen.korrelations_qualitaet;
                const qualityValue = kq.gesamtqualitaet || 0;
                const qualityClass = qualityValue >= 80 ? 'good' : qualityValue >= 50 ? 'warning' : 'critical';
                
                html += `<div class="analysis-section">`;
                html += `<h3>Korrelationsqualit√§t <span class="info-icon" onclick="showInfo('correlation-quality')">i</span></h3>`;
                
                // Prominente Darstellung der Gesamtqualit√§t
                html += `<div class="prominent-metric ${qualityClass}">`;
                html += `<div class="metric-label">Gesamtqualit√§t</div>`;
                html += `<div class="metric-value">${formatValue(qualityValue, 1)}%</div>`;
                html += `<div class="metric-interpretation">`;
                if (qualityValue >= 80) {
                    html += `Sensoren arbeiten einwandfrei`;
                } else if (qualityValue >= 50) {
                    html += `Kalibrierung empfohlen`;
                } else {
                    html += `Wartung erforderlich!`;
                }
                html += `</div>`;
                html += `</div>`;
                
                if (kq.auffaellige_korrelationen && kq.auffaellige_korrelationen.length > 0) {
                    html += `<h4>Auff√§llige Korrelationen:</h4>`;
                    html += `<table><thead><tr><th>Parameter</th><th>Korrelation</th><th>Qualit√§t</th></tr></thead><tbody>`;
                    kq.auffaellige_korrelationen.forEach(k => {
                        html += `<tr><td>${k.parameter}</td><td>${k.korrelation}</td><td>${k.qualitaet}%</td></tr>`;
                    });
                    html += `</tbody></table>`;
                }
                html += `</div>`;
            }
            
            // Landwirtschaftliche Eintr√§ge - PROMINENT
            if (analysisData.erweiterte_analysen?.landwirtschaftliche_eintraege) {
                const le = analysisData.erweiterte_analysen.landwirtschaftliche_eintraege;
                const riskValue = le.risiko_index || 0;
                const riskClass = riskValue < 40 ? 'good' : riskValue < 70 ? 'warning' : 'critical';
                
                html += `<div class="analysis-section">`;
                html += `<h3>Landwirtschaftliche Eintr√§ge <span class="info-icon" onclick="showInfo('agricultural-runoff')">i</span></h3>`;
                
                // Prominente Darstellung des Risiko-Index
                html += `<div class="prominent-metric ${riskClass}">`;
                html += `<div class="metric-label">Risiko-Index</div>`;
                html += `<div class="metric-value">${formatValue(riskValue, 1)}<span class="metric-unit">/100</span></div>`;
                html += `<div class="metric-interpretation">`;
                if (riskValue >= 70) {
                    html += `Sehr hoher landwirtschaftlicher Einfluss!`;
                } else if (riskValue >= 40) {
                    html += `Erh√∂hter landwirtschaftlicher Einfluss`;
                } else {
                    html += `Geringer landwirtschaftlicher Einfluss`;
                }
                html += `</div>`;
                html += `</div>`;
                
                if (le.erkannte_ereignisse && le.erkannte_ereignisse.length > 0) {
                    html += `<h4>Erkannte Ereignisse:</h4>`;
                    html += `<table><thead><tr><th>Typ</th><th>Zeitpunkt</th><th>Dauer</th><th>Schweregrad</th></tr></thead><tbody>`;
                    le.erkannte_ereignisse.forEach(e => {
                        const eventDate = formatDateGerman(e.start_time);
                        const severityClass = e.severity === 'high' ? 'critical' : e.severity === 'medium' ? 'warning' : 'good';
                        const translatedType = translateEventType(e.type);
                        const translatedSeverity = translateSeverity(e.severity);
                        
                        html += `<tr>`;
                        html += `<td>${translatedType}</td>`;
                        html += `<td>${eventDate}</td>`;
                        html += `<td>${e.duration_hours}h</td>`;
                        html += `<td class="severity-${severityClass}">${translatedSeverity}</td>`;
                        html += `</tr>`;
                    });
                    html += `</tbody></table>`;
                }
                
                // Risiko-Indikatoren
                if (le.risiko_indikatoren) {
                    html += `<h4 style="margin-top: 20px; margin-bottom: 10px;">Risiko-Indikatoren:</h4>`;
                    html += `<div style="margin-left: 20px;">`;
                    html += `<ul style="list-style-type: disc; margin-left: 20px;">`;
                    Object.entries(le.risiko_indikatoren).forEach(([key, value]) => {
                        let displayName = key;
                        switch(key) {
                            case 'nutrient_load_index': displayName = 'N√§hrstoffbelastung'; break;
                            case 'runoff_frequency_index': displayName = 'Eintrags-H√§ufigkeit'; break;
                            case 'water_stress_index': displayName = 'Gew√§sserbelastung'; break;
                            case 'overall_agricultural_risk': displayName = 'Gesamtrisiko'; break;
                            default: displayName = key.replace(/_/g, ' ');
                        }
                        html += `<li><strong>${displayName}:</strong> ${formatValue(value, 1)}</li>`;
                    });
                    html += `</ul>`;
                    html += `</div>`;
                }
                html += `</div>`;
            }
            
            // Regionale Bewertung
            if (analysisData.erweiterte_analysen?.regionale_bewertung) {
                const rb = analysisData.erweiterte_analysen.regionale_bewertung;
                html += `<div class="analysis-section">`;
                html += `<h3>Regionale Bewertung</h3>`;
                
                if (rb.saison_faktoren) {
                    html += `<h4>Saisonale Faktoren: <span class="info-icon" onclick="showInfo('seasonal-factors')">i</span></h4>`;
                    html += `<div style="margin-left: 20px;">`;
                    html += `<ul style="list-style-type: disc; margin-left: 20px;">`;
                    html += `<li><strong>Aktivit√§t:</strong> ${rb.saison_faktoren.aktivit√§t}</li>`;
                    html += `<li><strong>D√ºnger-Risiko:</strong> ${(rb.saison_faktoren.d√ºnger_risiko * 100).toFixed(0)}%</li>`;
                    html += `<li><strong>G√ºlle-Risiko:</strong> ${(rb.saison_faktoren.g√ºlle_risiko * 100).toFixed(0)}%</li>`;
                    html += `<li><strong>Erosions-Risiko:</strong> ${(rb.saison_faktoren.erosions_risiko * 100).toFixed(0)}%</li>`;
                    html += `</ul>`;
                    html += `</div>`;
                }
                
                // Empfehlungen - BESONDERS PROMINENT bei SOFORTMASSNAHMEN
                if (rb.empfehlungen && rb.empfehlungen.length > 0) {
                    const hasSofortmassnahmen = rb.empfehlungen.some(e => e.includes('SOFORTMASSNAHMEN'));
                    
                    if (hasSofortmassnahmen) {
                        html += `<div class="urgent-recommendations">`;
                        html += `<h4><span class="urgent-icon">‚ö†Ô∏è</span> SOFORTMASSNAHMEN ERFORDERLICH</h4>`;
                        html += `<div class="urgent-content">`;
                        
                        // Teile Empfehlungen in Sofortma√ünahmen und normale
                        const sofortmassnahmen = [];
                        const normaleEmpfehlungen = [];
                        
                        let collectingSofort = false;
                        rb.empfehlungen.forEach(empfehlung => {
                            if (empfehlung.includes('SOFORTMASSNAHMEN')) {
                                collectingSofort = true;
                            } else if (collectingSofort && empfehlung.match(/^\d+\./)) {
                                sofortmassnahmen.push(empfehlung);
                            } else {
                                collectingSofort = false;
                                normaleEmpfehlungen.push(empfehlung);
                            }
                        });
                        
                        if (sofortmassnahmen.length > 0) {
                            html += `<ol class="urgent-list">`;
                            sofortmassnahmen.forEach(item => {
                                html += `<li>${item.replace(/^\d+\./, '').trim()}</li>`;
                            });
                            html += `</ol>`;
                        }
                        html += `</div>`;
                        html += `</div>`;
                        
                        // Normale Empfehlungen
                        if (normaleEmpfehlungen.length > 0) {
                            html += `<h4 style="margin-top: 20px;">Weitere Empfehlungen:</h4>`;
                            html += `<div style="margin-left: 20px;">`;
                            html += `<ul style="list-style-type: disc; margin-left: 20px;">`;
                            normaleEmpfehlungen.forEach(empfehlung => {
                                html += `<li>${empfehlung}</li>`;
                            });
                            html += `</ul>`;
                            html += `</div>`;
                        }
                    } else {
                        // Normale Darstellung ohne Sofortma√ünahmen
                        html += `<h4>Empfehlungen:</h4>`;
                        html += `<div style="margin-left: 20px;">`;
                        html += `<ul style="list-style-type: disc; margin-left: 20px;">`;
                        rb.empfehlungen.forEach(empfehlung => {
                            html += `<li>${empfehlung}</li>`;
                        });
                        html += `</ul>`;
                        html += `</div>`;
                    }
                }
                html += `</div>`;
            }
            
            content.innerHTML = html || '<p>Keine Analysedaten zum Anzeigen</p>';
            console.log('Analysis loaded');
        }
        
        // Text-Bericht laden
        function loadTextReport() {
            console.log('Loading text report...');
            const reportDiv = document.getElementById('textReport');
            if (textReport && textReport.length > 0) {
                reportDiv.textContent = textReport;
                console.log('Text report loaded with', textReport.length, 'characters');
            } else {
                reportDiv.textContent = 'Kein Text-Bericht verf√ºgbar';
            }
        }
        
        // Initial laden wenn Seite geladen
        window.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded, ready for tab switching');
        });

        document.addEventListener('DOMContentLoaded', function() {
        // Warte kurz, dann lade den aktiven Tab
        setTimeout(function() {
                var activeTab = document.querySelector('.tab-content.active');
                if (activeTab && activeTab.id === 'errors') {
                    loadErrorTable();
                }
            }, 100);
        });

            // Modal-Funktionalit√§t
        const modal = document.getElementById('infoModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');
        const closeBtn = document.getElementsByClassName('close')[0];
        
        // Modal schlie√üen
        closeBtn.onclick = function() {
            modal.style.display = 'none';
        }
        
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
        
        // Info-Inhalte definieren
        const infoContent = {
            'correlation-quality': {
                title: 'Korrelationsqualit√§t',
                content: `
                    <p>Die <strong>Korrelationsqualit√§t</strong> pr√ºft, ob die gemessenen Parameter in physikalisch sinnvollen Beziehungen zueinander stehen.</p>
                    
                    <div class="metric-explanation">
                        <h3>Was wird gepr√ºft?</h3>
                        <ul>
                            <li><strong>pH-Sauerstoff-Beziehung:</strong> Tags√ºber sollten beide durch Photosynthese steigen</li>
                            <li><strong>Temperatur-Sauerstoff:</strong> W√§rmeres Wasser kann weniger Sauerstoff l√∂sen</li>
                            <li><strong>Chlorophyll-pH:</strong> Hohe Algenaktivit√§t erh√∂ht den pH-Wert</li>
                            <li><strong>Temperaturschichtung:</strong> Tieferes Wasser sollte k√ºhler sein</li>
                        </ul>
                    </div>
                    
                    <div class="metric-explanation">
                        <h3>Bewertung Ihrer Messung: 75.7%</h3>
                        <div class="value-interpretation interpretation-warning">
                            <strong>Befriedigende Qualit√§t:</strong> Die meisten Sensoren arbeiten plausibel, aber es gibt Auff√§lligkeiten. 
                            M√∂glicherweise m√ºssen einzelne Sensoren kalibriert werden.
                        </div>
                    </div>
                `
            },
            'agricultural-runoff': {
                title: 'Landwirtschaftliche Eintr√§ge',
                content: `
                    <p>Das System erkennt <strong>landwirtschaftliche Eintr√§ge</strong> durch charakteristische Muster in den Messwerten.</p>
                    
                    <div class="metric-explanation">
                        <h3>Risiko-Index: 85.2/100</h3>
                        <div class="value-interpretation interpretation-danger">
                            <strong>Hoher landwirtschaftlicher Einfluss!</strong> Es wurden deutliche Anzeichen f√ºr N√§hrstoffeintr√§ge aus der Landwirtschaft erkannt.
                        </div>
                    </div>
                    
                    <h3>Die einzelnen Indikatoren:</h3>
                    
                    <div class="metric-explanation">
                        <strong>N√§hrstoffbelastung (55.5):</strong><br>
                        Misst die Nitrat-Konzentration und deren Spitzen. Werte √ºber 50 zeigen erh√∂hte D√ºngermitteleintr√§ge an.
                    </div>
                    
                    <div class="metric-explanation">
                        <strong>Eintrags-H√§ufigkeit (100.0):</strong><br>
                        Z√§hlt pl√∂tzliche Anstiege verschiedener Parameter. Der Maximalwert deutet auf sehr h√§ufige Eintr√§ge hin - 
                        typisch f√ºr intensive Landwirtschaft im Einzugsgebiet.
                    </div>
                    
                    <div class="metric-explanation">
                        <strong>Gew√§sserbelastung (100.0):</strong><br>
                        Bewertet Sauerstoffmangel, pH-Extreme und Algenbl√ºten. Der Maximalwert zeigt, dass der See bereits 
                        stark unter den Eintr√§gen leidet.
                    </div>
                    
                    <h3>Was bedeutet das?</h3>
                    <p>Der See erh√§lt regelm√§√üig N√§hrstoffe aus der Landwirtschaft, was zu √úberd√ºngung (Eutrophierung) f√ºhrt. 
                    Dies kann Algenbl√ºten, Sauerstoffmangel und Fischsterben verursachen.</p>
                `
            },
            'seasonal-factors': {
                title: 'Saisonale Faktoren',
                content: `
                    <p>Die <strong>saisonalen Faktoren</strong> ber√ºcksichtigen den landwirtschaftlichen Kalender in Mecklenburg-Vorpommern.</p>
                    
                    <div class="metric-explanation">
                        <h3>Aktuelle Phase: D√ºngung</h3>
                        <p>Ende Mai ist Hauptd√ºngungszeit f√ºr Mais und Sommergetreide. Dies erkl√§rt die erh√∂hten N√§hrstoffwerte.</p>
                    </div>
                    
                    <h3>Risikobewertung:</h3>
                    
                    <div class="metric-explanation">
                        <strong>D√ºnger-Risiko (80%):</strong><br>
                        Sehr hoch w√§hrend der aktiven D√ºngephase. Mineralische D√ºnger k√∂nnen bei Regen schnell ausgewaschen werden.
                    </div>
                    
                    <div class="metric-explanation">
                        <strong>G√ºlle-Risiko (20%):</strong><br>
                        Moderat - G√ºlle wird haupts√§chlich im Fr√ºhjahr (Februar-April) ausgebracht.
                    </div>
                    
                    <div class="metric-explanation">
                        <strong>Erosions-Risiko (30%):</strong><br>
                        Mittel - die Pflanzen bedecken den Boden noch nicht vollst√§ndig, Starkregen kann Boden abschwemmen.
                    </div>
                    
                    <p><strong>Empfehlung:</strong> Verst√§rkte √úberwachung nach Regenereignissen, Dialog mit Landwirten √ºber 
                    gew√§sserschonende Bewirtschaftung.</p>
                `
            },
            'risk-agricultural': {
                title: 'Landwirtschaftlicher Einfluss',
                content: `
                    <div class="metric-explanation">
                        <h3>Risiko-Index: 85/100</h3>
                        <div class="value-interpretation interpretation-danger">
                            <strong>Sehr hoher landwirtschaftlicher Einfluss</strong>
                        </div>
                    </div>
                    
                    <p>Dieser Index fasst alle Indikatoren f√ºr landwirtschaftliche Belastung zusammen:</p>
                    <ul>
                        <li>N√§hrstoffkonzentrationen (Nitrat, Phosphat)</li>
                        <li>H√§ufigkeit von Eintrags-Ereignissen</li>
                        <li>Biologische Stressanzeichen (Algen, Sauerstoffmangel)</li>
                        <li>Zeitliche Muster (nach Regen, w√§hrend D√ºngephasen)</li>
                    </ul>
                    
                    <h3>Handlungsbedarf:</h3>
                    <ul>
                        <li>Kontakt mit Landwirtschaftsbeh√∂rde aufnehmen</li>
                        <li>Gew√§sserrandstreifen pr√ºfen</li>
                        <li>Beratung f√ºr Landwirte anbieten</li>
                        <li>Ggf. Badeverbot w√§hrend Algenbl√ºten</li>
                    </ul>
                `
            },
            'risk-plausibility': {
                title: 'Sensorplausibilit√§t',
                content: `
                    <div class="metric-explanation">
                        <h3>Qualit√§t: 76%</h3>
                        <div class="value-interpretation interpretation-warning">
                            <strong>Befriedigende Sensorqualit√§t</strong>
                        </div>
                    </div>
                    
                    <p>Dieser Wert zeigt, wie gut die Messwerte zueinander passen:</p>
                    <ul>
                        <li><strong>>90%:</strong> Alle Sensoren arbeiten einwandfrei</li>
                        <li><strong>70-90%:</strong> Kleinere Unstimmigkeiten, Kalibrierung pr√ºfen</li>
                        <li><strong>50-70%:</strong> Deutliche Probleme, Wartung erforderlich</li>
                        <li><strong><50%:</strong> Sensorfehler, sofortige Wartung n√∂tig</li>
                    </ul>
                    
                    <h3>M√∂gliche Ursachen f√ºr reduzierte Qualit√§t:</h3>
                    <ul>
                        <li>Sensordrift durch Alterung</li>
                        <li>Bewuchs oder Verschmutzung</li>
                        <li>Kalibrierung √ºberf√§llig</li>
                        <li>Defekte Einzelsensoren</li>
                    </ul>
                `
            },
            'risk-nutrients': {
                title: 'N√§hrstoffbelastung',
                content: `
                    <div class="metric-explanation">
                        <h3>Index: 56/100</h3>
                        <div class="value-interpretation interpretation-warning">
                            <strong>Erh√∂hte N√§hrstoffbelastung</strong>
                        </div>
                    </div>
                    
                    <p>Bewertet die Konzentration von Pflanzenn√§hrstoffen im Wasser:</p>
                    <ul>
                        <li><strong>Nitrat:</strong> Hauptindikator f√ºr D√ºngereintrag</li>
                        <li><strong>Phosphat:</strong> Limitierender Faktor f√ºr Algenwachstum</li>
                        <li><strong>H√§ufigkeit von Spitzenwerten:</strong> Zeigt akute Eintr√§ge</li>
                    </ul>
                    
                    <h3>Bewertungsskala:</h3>
                    <ul>
                        <li><strong>0-20:</strong> N√§hrstoffarm (oligotroph) - sehr gut</li>
                        <li><strong>20-40:</strong> M√§√üig n√§hrstoffreich (mesotroph) - gut</li>
                        <li><strong>40-60:</strong> N√§hrstoffreich (eutroph) - bedenklich</li>
                        <li><strong>60-100:</strong> √úberm√§√üig n√§hrstoffreich (hypertroph) - kritisch</li>
                    </ul>
                    
                    <p><strong>Ihr See:</strong> Befindet sich im eutrophen Bereich mit Tendenz zur √úberd√ºngung.</p>
                `
            }
        };
        
        // Funktion zum √ñffnen des Modals
        function showInfo(infoType) {
            const info = infoContent[infoType];
            if (info) {
                modalTitle.textContent = info.title;
                modalBody.innerHTML = info.content;
                modal.style.display = 'block';
            }
        }

                // Karten-Initialisierung
        function initMap() {
            // Koordinaten aus den Daten
            const lat = 53.445698;
            const lng = 14.226044;
            const stationName = 'L√∂cknitzer See';
            
            // Initialisiere die Karte
            const map = L.map('map').setView([lat, lng], 13);
            
            // OpenStreetMap Layer (kostenlos!)
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                maxZoom: 18
            }).addTo(map);
            
            // Marker f√ºr die Station
            const marker = L.marker([lat, lng]).addTo(map);
            marker.bindPopup(`<strong>${stationName}</strong><br>Messstation`).openPopup();
            
            // Zus√§tzlich: Kreis um die Station (zeigt ungef√§hren Einflussbereich)
            L.circle([lat, lng], {
                color: '#0066CC',
                fillColor: '#0066CC',
                fillOpacity: 0.1,
                radius: 1000 // 1km Radius
            }).addTo(map);
            
            // Verz√∂gerte Gr√∂√üenanpassung (wichtig f√ºr korrekte Darstellung)
            setTimeout(function() {
                map.invalidateSize();
            }, 100);
        }
        
        // Karte initialisieren wenn Tab geladen wird
        let mapInitialized = false;
        const originalShowTab = showTab;
        showTab = function(event, tabName) {
            originalShowTab(event, tabName);
            
            // Initialisiere Karte beim ersten Mal
            if (tabName === 'overview' && !mapInitialized) {
                setTimeout(initMap, 100);
                mapInitialized = true;
            }
        }
        
        // Initialisiere Karte direkt wenn overview aktiv ist
        window.addEventListener('DOMContentLoaded', () => {
            if (document.getElementById('overview').classList.contains('active')) {
                setTimeout(initMap, 100);
                mapInitialized = true;
            }
        });

        window.addEventListener('DOMContentLoaded', () => {
            if (dailyData && Object.keys(dailyData).length > 0) {
                const lastDate = Object.keys(dailyData).sort().pop();
                const formattedDate = formatDateGerman(lastDate);
                const titleElement = document.getElementById('currentDayTitle');
                if (titleElement) {
                    titleElement.innerHTML = `Aktuelle Tageswerte <small style="font-weight: normal; color: #666;">(${formattedDate})</small>`;
                }
            }
        });

        function loadSettings() {
            console.log('Loading settings...');
            const content = document.getElementById('settingsContent');
            
            let html = '';
            
            // Basis-Informationen
            html += '<div class="settings-section">';
            html += '<h3>Stations-Informationen</h3>';
            html += '<table class="settings-table">';
            html += `<tr><td>Stationsname:</td><td class="settings-value">L√∂cknitzer See</td></tr>`;
            html += `<tr><td>Stations-ID:</td><td class="settings-value">wamo00019</td></tr>`;
            html += `<tr><td>Gemeinde:</td><td class="settings-value">L√∂cknitz</td></tr>`;
            html += `<tr><td>Koordinaten:</td><td class="settings-value">53.445698¬∞N, 14.226044¬∞E</td></tr>`;
            html += '</table>';
            html += '</div>';
            
            // Grenzwerte aus den Analysedaten extrahieren
            html += '<div class="settings-section">';
            html += '<h3>Aktuelle Grenzwerte</h3>';
            html += '<table class="settings-table">';
            
            // Diese Werte kommen aus Ihrer config_file.py
            const grenzwerte = {"Phycocyanin Abs.": {"min": 0.0, "max": 200.0, "unit": "¬µg/L"}, "Phycocyanin Abs. (comp)": {"min": 0.0, "max": 200.0, "unit": "¬µg/L"}, "TOC": {"min": 1.0, "max": 70.0, "unit": "mg/L"}, "Tr√ºbung": {"min": 0.0, "max": 150.0, "unit": "NTU"}, "Chl-a": {"min": 0.0, "max": 250.0, "unit": "¬µg/L"}, "DOC": {"min": 1.0, "max": 60.0, "unit": "mg/L"}, "Nitrat": {"min": 0.0, "max": 50.0, "unit": "mg/L"}, "Gel√∂ster Sauerstoff": {"min": 0.0, "max": 20.0, "unit": "mg/L"}, "Leitf√§higkeit": {"min": 100, "max": 1500, "unit": "¬µS/cm"}, "pH": {"min": 6.0, "max": 10.0, "unit": ""}, "Redoxpotential": {"min": -300, "max": 600, "unit": "mV"}, "Wassertemperatur": {"min": -0.5, "max": 32.0, "unit": "¬∞C"}, "Lufttemperatur": {"min": -25.0, "max": 40.0, "unit": "¬∞C"}};
            
            if (grenzwerte && Object.keys(grenzwerte).length > 0) {
                Object.entries(grenzwerte).forEach(([param, values]) => {
                    html += `<tr>`;
                    html += `<td>${param}:</td>`;
                    html += `<td class="settings-value">`;
                    html += `${values.min} - ${values.max} <span class="settings-unit">${values.unit || ''}</span>`;
                    html += `</td>`;
                    html += `</tr>`;
                });
            } else {
                html += '<tr><td colspan="2">Keine spezifischen Grenzwerte definiert</td></tr>';
            }
            
            html += '</table>';
            html += '</div>';
            
            // Zus√§tzliche Informationen
            if ({"name": "L√∂cknitzer See", "gemeinde": "L√∂cknitz", "daten_status": {"gesamt": "VERIFIZIERT", "letzte_aktualisierung": "2025-06-30", "bearbeiter": "Gemini/AI-Recherche", "details": {"morphometrie": "VERIFIZIERT - Daten des Landesamtes (LUNG M-V)", "koordinaten": "VERIFIZIERT - Geodatenportal M-V", "einzugsgebiet": "VERIFIZIERT - Daten des Landesamtes (LUNG M-V)", "grenzwerte": "STANDARD - EU-Badegew√§sserrichtlinie", "grenzlage": "VERIFIZIERT - Kartenmaterial"}}, "typ": "eutropher_flachsee", "max_tiefe": 3.4, "koordinaten": {"lat": 53.445698, "lng": 14.226044}, "einzugsgebiet": {"agrar_anteil": 65, "wald_anteil": 15, "siedlung_anteil": 8, "sonstiger_anteil": 12}}) {
                const metadata = {"name": "L√∂cknitzer See", "gemeinde": "L√∂cknitz", "daten_status": {"gesamt": "VERIFIZIERT", "letzte_aktualisierung": "2025-06-30", "bearbeiter": "Gemini/AI-Recherche", "details": {"morphometrie": "VERIFIZIERT - Daten des Landesamtes (LUNG M-V)", "koordinaten": "VERIFIZIERT - Geodatenportal M-V", "einzugsgebiet": "VERIFIZIERT - Daten des Landesamtes (LUNG M-V)", "grenzwerte": "STANDARD - EU-Badegew√§sserrichtlinie", "grenzlage": "VERIFIZIERT - Kartenmaterial"}}, "typ": "eutropher_flachsee", "max_tiefe": 3.4, "koordinaten": {"lat": 53.445698, "lng": 14.226044}, "einzugsgebiet": {"agrar_anteil": 65, "wald_anteil": 15, "siedlung_anteil": 8, "sonstiger_anteil": 12}};
                
                if (metadata.einzugsgebiet) {
                    html += '<div class="settings-section">';
                    html += '<h3>Einzugsgebiet</h3>';
                    html += '<table class="settings-table">';
                    html += `<tr><td>Agrarfl√§chen:</td><td class="settings-value">${metadata.einzugsgebiet.agrar_anteil}%</td></tr>`;
                    html += `<tr><td>Waldfl√§chen:</td><td class="settings-value">${metadata.einzugsgebiet.wald_anteil}%</td></tr>`;
                    html += `<tr><td>Siedlungsfl√§chen:</td><td class="settings-value">${metadata.einzugsgebiet.siedlung_anteil}%</td></tr>`;
                    html += '</table>';
                    html += '</div>';
                }
                
                if (metadata.max_tiefe) {
                    html += '<div class="settings-section">';
                    html += '<h3>See-Eigenschaften</h3>';
                    html += '<table class="settings-table">';
                    html += `<tr><td>Maximale Tiefe:</td><td class="settings-value">${metadata.max_tiefe} m</td></tr>`;
                    html += `<tr><td>See-Typ:</td><td class="settings-value">${metadata.typ || 'Nicht definiert'}</td></tr>`;
                    html += '</table>';
                    html += '</div>';
                }
            }
            
            html += '<div class="settings-note">';
            html += '<strong>Hinweis:</strong> Diese Einstellungen k√∂nnen nur von autorisierten Administratoren in der Systemkonfiguration ge√§ndert werden.';
            html += '</div>';
            
            content.innerHTML = html;
        }

        // Erweitere showTab
        const originalShowTab3 = showTab;
        showTab = function(event, tabName) {
            originalShowTab3(event, tabName);
            
            if (tabName === 'settings') {
                loadSettings();
            }
        }
        
    
    </script>
</body>
</html>
